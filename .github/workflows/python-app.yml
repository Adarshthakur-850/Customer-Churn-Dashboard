name: Python CI

on:
push:
branches: ["main"]
pull_request:
branches: ["main"]

jobs:
lint-and-test:
runs-on: ubuntu-latest

```
strategy:
  matrix:
    python-version: ["3.10", "3.11"]

steps:
  - name: Checkout repository
    uses: actions/checkout@v4

  - name: Set up Python
    uses: actions/setup-python@v5
    with:
      python-version: ${{ matrix.python-version }}
      cache: "pip"

  - name: Install dependencies
    run: |
      python -m pip install --upgrade pip
      pip install flake8 pytest
      if [ -f requirements.txt ]; then pip install -r requirements.txt; fi

  - name: Run flake8 (strict on real errors)
    run: |
      flake8 . \
        --count \
        --select=E9,F63,F7,F82 \
        --show-source \
        --statistics

  - name: Run tests (if present)
    run: |
      if [ -d tests ]; then pytest -v; else echo "No tests found, skipping."; fi
```
